{"version":3,"file":"use-redux-state.modern.js","sources":["../src/index.js"],"sourcesContent":["import { useSelector, useDispatch } from 'react-redux';\nimport set from 'lodash.set';\nimport get from 'lodash.get';\n\nexport const asyncMiddleware = (store) => (next) => async (action) => {\n  const result = next(action);\n  const async = get(action, 'meta.async');\n  if (async) {\n    const { dispatch, getState } = store;\n    await async({\n      payload: action.payload,\n      set: (path, payload, name) => {\n        const type = name || `SET[${path}]`;\n        dispatch({ type, payload, meta: { path } });\n      },\n      get: (path) => {\n        const state = getState();\n        return get(state, path);\n      },\n    });\n  }\n  return result;\n};\n\nexport const createReducer = (initialState) => (state = initialState, action) => {\n  const path = get(action, 'meta.path');\n  if (!path) return state;\n  return set(state, path, action.payload);\n};\n\nexport const useRedux = (path, name) => {\n  const value = useSelector((state) => get(state, path));\n  const dispatch = useDispatch();\n  const type = name || `SET[${path}]`;\n  const action = (payload) => dispatch({ type, payload, meta: { path } });\n  return [value, action];\n};\n\nexport const useAsync = ({ type, effect }) => {\n  const dispatch = useDispatch();\n  return (payload) => dispatch({ type, payload, meta: { async: effect } });\n};\n\nexport const useReduxValue = (path) => {\n  const value = useSelector((state) => get(state, path));\n  return value;\n};\n\nexport const useReduxSetter = (path, name) => {\n  const dispatch = useDispatch();\n  const type = name || `SET[${path}]`;\n  const action = (payload) => dispatch({ type, payload, meta: { path } });\n  return action;\n};\n"],"names":["asyncMiddleware","store","next","async","result","action","get","dispatch","getState","payload","set","path","name","type","meta","state","createReducer","initialState","useRedux","value","useSelector","useDispatch","useAsync","effect","useReduxValue","useReduxSetter"],"mappings":"+GAIaA,MAAAA,EAAmBC,GAAWC,GAASC,MAAAA,IAClD,MAAMC,EAASF,EAAKG,GACdF,EAAQG,EAAID,EAAQ,cAC1B,GAAIF,EAAO,CACT,MAAMI,SAAEA,EAAFC,SAAYA,GAAaP,QACzBE,EAAM,CACVM,QAASJ,EAAOI,QAChBC,IAAK,CAACC,EAAMF,EAASG,KAEnBL,EAAS,CAAEM,KADED,GAAS,OAAMD,KACXF,QAAAA,EAASK,KAAM,CAAEH,KAAAA,MAEpCL,IAAMK,IACJ,MAAMI,EAAQP,IACd,OAAOF,EAAIS,EAAOJ,MAIxB,OAAOP,GAGIY,EAAiBC,GAAiB,CAACF,EAAQE,EAAcZ,KACpE,MAAMM,EAAOL,EAAID,EAAQ,aACzB,OAAKM,EACED,EAAIK,EAAOJ,EAAMN,EAAOI,SADbM,GAIPG,EAAW,CAACP,EAAMC,KAC7B,MAAMO,EAAQC,EAAaL,GAAUT,EAAIS,EAAOJ,IAC1CJ,EAAWc,IACXR,EAAOD,GAAS,OAAMD,KAE5B,MAAO,CAACQ,EADQV,GAAYF,EAAS,CAAEM,KAAAA,EAAMJ,QAAAA,EAASK,KAAM,CAAEH,KAAAA,OAInDW,EAAW,EAAGT,KAAAA,EAAMU,OAAAA,MAC/B,MAAMhB,EAAWc,IACjB,OAAQZ,GAAYF,EAAS,CAAEM,KAAAA,EAAMJ,QAAAA,EAASK,KAAM,CAAEX,MAAOoB,MAGlDC,EAAiBb,GACdS,EAAaL,GAAUT,EAAIS,EAAOJ,IAIrCc,EAAiB,CAACd,EAAMC,KACnC,MAAML,EAAWc,IACXR,EAAOD,GAAS,OAAMD,KAE5B,OADgBF,GAAYF,EAAS,CAAEM,KAAAA,EAAMJ,QAAAA,EAASK,KAAM,CAAEH,KAAAA"}