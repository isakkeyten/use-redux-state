{"version":3,"file":"use-redux-state.js","sources":["../src/index.js"],"sourcesContent":["import { useSelector, useDispatch } from 'react-redux';\nimport set from 'lodash.set';\nimport get from 'lodash.get';\n\nexport const asyncMiddleware = (store) => (next) => async (action) => {\n  const result = next(action);\n  const async = get(action, 'meta.async');\n  if (async) {\n    const { dispatch, getState } = store;\n    await async({\n      payload: action.payload,\n      set: (path, payload, name) => {\n        const type = name || `SET[${path}]`;\n        dispatch({ type, payload, meta: { path } });\n      },\n      get: (path) => {\n        const state = getState();\n        return get(state, path);\n      },\n    });\n  }\n  return result;\n};\n\nexport const createReducer = (initialState) => (state = initialState, action) => {\n  const path = get(action, 'meta.path');\n  if (!path) return state;\n  return set(state, path, action.payload);\n};\n\nexport const useRedux = (path, name) => {\n  const value = useSelector((state) => get(state, path));\n  const dispatch = useDispatch();\n  const type = name || `SET[${path}]`;\n  const action = (payload) => dispatch({ type, payload, meta: { path } });\n  return [value, action];\n};\n\nexport const useAsync = ({ type, effect }) => {\n  const dispatch = useDispatch();\n  return (payload) => dispatch({ type, payload, meta: { async: effect } });\n};\n\nexport const useReduxValue = (path) => {\n  const value = useSelector((state) => get(state, path));\n  return value;\n};\n\nexport const useReduxSetter = (path, name) => {\n  const dispatch = useDispatch();\n  const type = name || `SET[${path}]`;\n  const action = (payload) => dispatch({ type, payload, meta: { path } });\n  return action;\n};\n"],"names":["store","next","action","result","async","get","dispatch","getState","payload","set","path","name","type","meta","state","initialState","effect","useDispatch","value","useSelector"],"mappings":"iLAI+B,SAACA,mBAAWC,mBAAgBC,OACzD,IAAMC,EAASF,EAAKC,GACdE,EAAQC,EAAIH,EAAQ,8BACtBE,OACME,EAAuBN,EAAvBM,SAAUC,EAAaP,EAAbO,gCACZH,EAAM,CACVI,QAASN,EAAOM,QAChBC,IAAK,SAACC,EAAMF,EAASG,GAEnBL,EAAS,CAAEM,KADED,UAAeD,MACXF,QAAAA,EAASK,KAAM,CAAEH,KAAAA,MAEpCL,IAAK,SAACK,GACJ,IAAMI,EAAQP,IACd,OAAOF,EAAIS,EAAOJ,iFAIxB,OAAOP,IAAAA,GAjBiC,4DAoBb,SAACY,mBAAkBD,EAAsBZ,YAAtBY,IAAAA,EAAQC,GACtD,IAAML,EAAOL,EAAIH,EAAQ,aACzB,OAAKQ,EACED,EAAIK,EAAOJ,EAAMR,EAAOM,SADbM,qBAYI,gBAAGF,IAAAA,KAAMI,IAAAA,OACzBV,EAAWW,gBACjB,gBAAQT,UAAYF,EAAS,CAAEM,KAAAA,EAAMJ,QAAAA,EAASK,KAAM,CAAET,MAAOY,wBAVvC,SAACN,EAAMC,GAC7B,IAAMO,EAAQC,cAAY,SAACL,UAAUT,EAAIS,EAAOJ,KAC1CJ,EAAWW,gBACXL,EAAOD,UAAeD,MAE5B,MAAO,CAACQ,EADO,SAACV,UAAYF,EAAS,CAAEM,KAAAA,EAAMJ,QAAAA,EAASK,KAAM,CAAEH,KAAAA,+BAclC,SAACA,EAAMC,GACnC,IAAML,EAAWW,gBACXL,EAAOD,UAAeD,MAE5B,OADe,SAACF,UAAYF,EAAS,CAAEM,KAAAA,EAAMJ,QAAAA,EAASK,KAAM,CAAEH,KAAAA,6BARnC,SAACA,GAE5B,OADcS,cAAY,SAACL,UAAUT,EAAIS,EAAOJ"}